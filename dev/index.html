<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · RateTables.jl</title><meta name="title" content="Home · RateTables.jl"/><meta property="og:title" content="Home · RateTables.jl"/><meta property="twitter:title" content="Home · RateTables.jl"/><meta name="description" content="Documentation for RateTables.jl."/><meta property="og:description" content="Documentation for RateTables.jl."/><meta property="twitter:description" content="Documentation for RateTables.jl."/><meta property="og:url" content="https://JuliaSurv.github.io/RateTables.jl/"/><meta property="twitter:url" content="https://JuliaSurv.github.io/RateTables.jl/"/><link rel="canonical" href="https://JuliaSurv.github.io/RateTables.jl/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>RateTables.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaSurv/RateTables.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaSurv/RateTables.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="RateTables"><a class="docs-heading-anchor" href="#RateTables">RateTables</a><a id="RateTables-1"></a><a class="docs-heading-anchor-permalink" href="#RateTables" title="Permalink"></a></h1><p>Documentation for <a href="https://github.com/JuliaSurv/RateTables.jl">RateTables</a>. This package provides rate tables for person-year computations, alike <a href="https://www.rdocumentation.org/packages/survival/versions/3.2-3/topics/ratetable">R&#39;s <code>ratetable</code> class</a>. </p><p>You can install it through : </p><pre><code class="language-julia hljs">using Pkg
Pkg.add(&quot;https://github.com/JuliaSurv/RateTables.jl&quot;)</code></pre><p>Then loading this package provides a few constants rate tables objects. See the bottom of this page for the available rate tables. For the sake of the example, we&#39;ll use the <code>RT_HMD</code> dictionary, which stores contries rates tables extracted from the <a href="https://mortality.org">Human Mortality Database (HMD)</a>:</p><pre><code class="language-julia hljs">using RateTables
rt = RT_HMD[:SVN] # SVN for slovenia.</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">RT(:sex,) with elements BRT(0..110 × 1983..2019).</code></pre><p>To obtain, for example, the daily hazard rate for a male, slovene, on its 20th birthday on the first of january 2010, you can call the <code>daily_hazard</code> function. It needs to be called with the arguments in a specific format: </p><ul><li>The age needs to be given in days, and the converting factor is 1 year = 365.241 days.</li><li>The date also needs to be given in days, same converting factor. </li><li>Other covariates formats depend on the rate table. Usually, there is a <code>sex</code> covariates with values <code>:male</code> and <code>:female</code>, sometimes <code>:total</code> too, but other covariates might have different format depending on the rate table.</li></ul><p>Then the right calling syntax is as follows: </p><pre><code class="language-julia hljs">a = 20*365.241
d = 2010*365.241
s = :male
v1 = daily_hazard(rt, a, d, s)
v2 = daily_hazard(rt, a, d; sex=s)
v3 = daily_hazard(rt[s], a, d)
(v1,v2,v3)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(2.092569007129928e-6, 2.092569007129928e-6, 2.092569007129928e-6)</code></pre><p>Note that there is a discrepency between HMD datasets and datasets from other places. For completeness, this package also include datasets commonly used in R for census datas, in particular the <code>relsurv::slopop</code> dataset for slovenia : </p><pre><code class="language-julia hljs">v1 = daily_hazard(slopop, a, d, s)
v2 = daily_hazard(slopop, a, d; sex=s)
v3 = daily_hazard(slopop[s], a, d)
(v1,v2,v3)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(2.20613869487702e-6, 2.20613869487702e-6, 2.20613869487702e-6)</code></pre><p>Sometimes there is more covariates in the datasets than only the sex. Ths is for example the case for the <code>survival::survexp.usr</code> dataset that includes the race. In this case, the calling structure is very similar: </p><pre><code class="language-julia hljs">r = :white
v1 = daily_hazard(survexp_usr, a, d, s, r)
v2 = daily_hazard(survexp_usr, a, d; sex=s, race=r)
v3 = daily_hazard(survexp_usr[s, r], a, d)
(v1,v2,v3)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(2.8872165601933327e-6, 2.8872165601933327e-6, 2.8872165601933327e-6)</code></pre><p>Fetching these daily hazard is a very sensitive operation that should be as fast as possible since it is usually used in the middle of very-hot loops. Therefore, we take care of the performance of our fetching algorithms.</p><p>Check out the index below for the list of availiable datasets. </p><ul><li><a href="#RateTables.RT_HMD"><code>RateTables.RT_HMD</code></a></li><li><a href="#RateTables.slopop"><code>RateTables.slopop</code></a></li><li><a href="#RateTables.survexp_fr"><code>RateTables.survexp_fr</code></a></li><li><a href="#RateTables.survexp_mn"><code>RateTables.survexp_mn</code></a></li><li><a href="#RateTables.survexp_us"><code>RateTables.survexp_us</code></a></li><li><a href="#RateTables.survexp_usr"><code>RateTables.survexp_usr</code></a></li><li><a href="#RateTables.RateTable"><code>RateTables.RateTable</code></a></li><li><a href="#RateTables.daily_hazard-Tuple{RateTables.BasicRateTable, Any, Any}"><code>RateTables.daily_hazard</code></a></li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RateTables.RT_HMD" href="#RateTables.RT_HMD"><code>RateTables.RT_HMD</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">`RT_HMD`</code></pre><p>Dictionary that contains the rates tables for each country.  The country codes are used to differentiate them. </p><p>These rates tables contain daily hazard rates for both sexes. They are derived from annual death probabilities (qₓ&#39;s) from the Human Mortality Database at https://www.mortality.org/</p><p>Dayly hazard for a slovenian male (code 0), born on the 1rst of january 1927, 192 days after his 37th birthday can for example be obtained as follows:</p><p><code>solovia_rt = RT_HMD[:SVN]</code> <code>daily_hazard(slovenia_rt, 37*RT_DAYS_IN_YEAR + 192, 1927*RT_DAYS_IN_YEAR + 192, 1)</code></p><p>The list of availiables countries can be queried via: </p><pre><code class="language-julia hljs">Dict(k =&gt; RT_HMD[k].country_name for k in keys(RT_HMD))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSurv/RateTables.jl/blob/a774452b2b12dfeba4e3db9dfd11ebe919e82907/src/RT_HMD.jl#L1-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RateTables.slopop" href="#RateTables.slopop"><code>RateTables.slopop</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">`slopop`</code></pre><p>This ratetable corresponds to R&#39;s package <code>relsurv</code>, drawn from census data set for the Slovene population. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSurv/RateTables.jl/blob/a774452b2b12dfeba4e3db9dfd11ebe919e82907/src/RT_R.jl#L2-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RateTables.survexp_fr" href="#RateTables.survexp_fr"><code>RateTables.survexp_fr</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">`survexp_fr`</code></pre><p>French census datas, drawn from R&#39;s package <code>survexp.fr</code>. Death rates are available from 1977 to 2019 for males and females aged from 0 to 99</p><p>Source: https://www.insee.fr/fr/statistiques/fichier/5390366/fm_t68.xlsx</p><p>References: Institut National de la Statistique et des Etudes Economiques</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSurv/RateTables.jl/blob/a774452b2b12dfeba4e3db9dfd11ebe919e82907/src/RT_R.jl#L54-L64">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RateTables.survexp_mn" href="#RateTables.survexp_mn"><code>RateTables.survexp_mn</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">`survexp_us`
`survexp_usr`
`survexp_mn`</code></pre><p>Census data sets for the US population, drawn from R&#39;s package <code>survival</code>.</p><ul><li><code>survexp_us</code>: total United States population, by age and sex, 1940 to 2012.</li><li><code>survexp_usr</code>: United States population, by age, sex and race, 1940 to 2014. Race is white or black. For 1960 and 1970 the black population values were not reported separately, so the nonwhite values were used. (Over the years, the reported tables have differed wrt reporting non-white and/or black.)</li><li><code>survexp_mn</code>: total Minnesota population, by age and sex, 1970 to 2013.</li></ul><p>Each of these tables contains the daily hazard rate for a matched subject from the population, defined as <span>$-\log(1-qₓ)$</span> for <span>$qₓ$</span> the 1 year probability of death as reported in the original tables from the US Census. For age 25 in 1970, for instance, <span>$pₓ=1−qₓ$</span> is is the probability that a subject who becomes 25 years of age in 1970 will achieve his/her 26th birthday. The tables are recast in terms of hazard per day for computational convenience.</p><p>age and dates dimensions are in days.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSurv/RateTables.jl/blob/a774452b2b12dfeba4e3db9dfd11ebe919e82907/src/RT_R.jl#L34-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RateTables.survexp_us" href="#RateTables.survexp_us"><code>RateTables.survexp_us</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">`survexp_us`
`survexp_usr`
`survexp_mn`</code></pre><p>Census data sets for the US population, drawn from R&#39;s package <code>survival</code>.</p><ul><li><code>survexp_us</code>: total United States population, by age and sex, 1940 to 2012.</li><li><code>survexp_usr</code>: United States population, by age, sex and race, 1940 to 2014. Race is white or black. For 1960 and 1970 the black population values were not reported separately, so the nonwhite values were used. (Over the years, the reported tables have differed wrt reporting non-white and/or black.)</li><li><code>survexp_mn</code>: total Minnesota population, by age and sex, 1970 to 2013.</li></ul><p>Each of these tables contains the daily hazard rate for a matched subject from the population, defined as <span>$-\log(1-qₓ)$</span> for <span>$qₓ$</span> the 1 year probability of death as reported in the original tables from the US Census. For age 25 in 1970, for instance, <span>$pₓ=1−qₓ$</span> is is the probability that a subject who becomes 25 years of age in 1970 will achieve his/her 26th birthday. The tables are recast in terms of hazard per day for computational convenience.</p><p>age and dates dimensions are in days.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSurv/RateTables.jl/blob/a774452b2b12dfeba4e3db9dfd11ebe919e82907/src/RT_R.jl#L34-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RateTables.survexp_usr" href="#RateTables.survexp_usr"><code>RateTables.survexp_usr</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">`survexp_us`
`survexp_usr`
`survexp_mn`</code></pre><p>Census data sets for the US population, drawn from R&#39;s package <code>survival</code>.</p><ul><li><code>survexp_us</code>: total United States population, by age and sex, 1940 to 2012.</li><li><code>survexp_usr</code>: United States population, by age, sex and race, 1940 to 2014. Race is white or black. For 1960 and 1970 the black population values were not reported separately, so the nonwhite values were used. (Over the years, the reported tables have differed wrt reporting non-white and/or black.)</li><li><code>survexp_mn</code>: total Minnesota population, by age and sex, 1970 to 2013.</li></ul><p>Each of these tables contains the daily hazard rate for a matched subject from the population, defined as <span>$-\log(1-qₓ)$</span> for <span>$qₓ$</span> the 1 year probability of death as reported in the original tables from the US Census. For age 25 in 1970, for instance, <span>$pₓ=1−qₓ$</span> is is the probability that a subject who becomes 25 years of age in 1970 will achieve his/her 26th birthday. The tables are recast in terms of hazard per day for computational convenience.</p><p>age and dates dimensions are in days.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSurv/RateTables.jl/blob/a774452b2b12dfeba4e3db9dfd11ebe919e82907/src/RT_R.jl#L34-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RateTables.RateTable" href="#RateTables.RateTable"><code>RateTables.RateTable</code></a> — <span class="docstring-category">Type</span></header><section><div><p>RateTable</p><p>This class deals with daily rate tables used in person-years computation.  For the moment it simply holds data from the HMD. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSurv/RateTables.jl/blob/a774452b2b12dfeba4e3db9dfd11ebe919e82907/src/RateTable.jl#L72-L78">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="RateTables.daily_hazard-Tuple{RateTables.BasicRateTable, Any, Any}" href="#RateTables.daily_hazard-Tuple{RateTables.BasicRateTable, Any, Any}"><code>RateTables.daily_hazard</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">`daily_hazard(rt::BasicRateTable,age,date)`</code></pre><p>This function queries daily hazard values from a given BasicRateTable. The parameters <code>age</code> and <code>date</code> have to be in days (1 year = 365.241 days).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSurv/RateTables.jl/blob/a774452b2b12dfeba4e3db9dfd11ebe919e82907/src/RateTable.jl#L46-L51">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Tuesday 2 April 2024 10:58">Tuesday 2 April 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
