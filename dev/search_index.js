var documenterSearchIndex = {"docs":
[{"location":"","page":"Home","title":"Home","text":"CurrentModule = RateTables","category":"page"},{"location":"#RateTables","page":"Home","title":"RateTables","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"The RateTables.jl Julia package provides daily rate table objects from census datasets targeted at person-year computations, alike R's ratetable class. ","category":"page"},{"location":"","page":"Home","title":"Home","text":"You can install it through: ","category":"page"},{"location":"","page":"Home","title":"Home","text":"using Pkg\nPkg.add(\"https://github.com/JuliaSurv/RateTables.jl\")","category":"page"},{"location":"","page":"Home","title":"Home","text":"Loading this package exports a few constant RateTable objects. See the bottom of this page for the available rate tables. For the sake of the example, we'll use the hmd_rates dictionary, which stores rates tables extracted from the Human Mortality Database (HMD).","category":"page"},{"location":"","page":"Home","title":"Home","text":"using RateTables\nhmd_rates","category":"page"},{"location":"","page":"Home","title":"Home","text":"The output of the REPL show that we have a RateTable object with two covariates :country and :sex. You can query the availiable covariates of a given RateTable: ","category":"page"},{"location":"","page":"Home","title":"Home","text":"availlable_covariates(hmd_rates, :sex)","category":"page"},{"location":"","page":"Home","title":"Home","text":"For this specific dataset, the number of countries is huge and calling availlable_covariates(hmd_rates, :country) wont be very usefull. For convenience, we provided details on the country codes separately in an other constant object hmd_countries:","category":"page"},{"location":"","page":"Home","title":"Home","text":"hmd_countries","category":"page"},{"location":"","page":"Home","title":"Home","text":"Recall that a daily hazard rate of mortality is defined as -log(1 - q_x)365241 for an annual death rate q_x. This is an alternative form of presenting mortality tables that is particularly convenient for person-year computations. To obtain daily rates from the tables, you have to use the daily_hazard function. It needs to be called with arguments in a specific format: ","category":"page"},{"location":"","page":"Home","title":"Home","text":"The age needs to be given in days, and the converting factor is 1 year = 365.241 days.\nThe date also needs to be given in days, same converting factor. \nOther covariates formats vary from rate tables to rate tables, but their order matters.","category":"page"},{"location":"","page":"Home","title":"Home","text":"Usually, the sex covariates has values :male, :female, sometimes :total. For hmd_rates, we already saw that there was two additional covariates: country and sex. ","category":"page"},{"location":"","page":"Home","title":"Home","text":"Depending on the querying syntax, the order of the passed argument can matter. For example, the daily hazard rate for a slovene male, on its 20th birthday the first of january 2010 can be queried with one of the following syntaxes:  ","category":"page"},{"location":"","page":"Home","title":"Home","text":"c = :svn # slovenia. \na = 20*365.241\nd = 2010*365.241\ns = :male\nv1 = daily_hazard(hmd_rates, a, d, c, s)\nv2 = daily_hazard(hmd_rates, a, d; country=c, sex=s)\nv3 = daily_hazard(hmd_rates, a, d; sex=s, country=c) # when using kwargs syntax, order of additional covariates does not matter. \nv4 = daily_hazard(hmd_rates[c, s], a, d) # here the order of arguments (c,s) also matter. \n(v1,v2,v3, v4)","category":"page"},{"location":"","page":"Home","title":"Home","text":"For completeness, this package also include datasets commonly used in R for census datas, in particular the relsurv::slopop dataset for slovenia: ","category":"page"},{"location":"","page":"Home","title":"Home","text":"daily_hazard(slopop, a, d; sex=s)","category":"page"},{"location":"","page":"Home","title":"Home","text":"Note the discrepency with HMD data. ","category":"page"},{"location":"","page":"Home","title":"Home","text":"Another example with additional covariates is the survival::survexp.usr dataset that includes a race covariate from us census data. In this case, the calling structure is very similar: ","category":"page"},{"location":"","page":"Home","title":"Home","text":"r = :white\nv1 = daily_hazard(survexp_usr, a, d, s, r)\nv2 = daily_hazard(survexp_usr, a, d; sex=s, race=r)\nv3 = daily_hazard(survexp_usr, a, d; race=r, sex=s)\nv4 = daily_hazard(survexp_usr[s, r], a, d)\n(v1,v2,v3,v4)","category":"page"},{"location":"","page":"Home","title":"Home","text":"Note that fetching these daily hazard is a very sensitive operation that should be as fast as possible since it is usually used in the middle of very-hot loops. Therefore, we take care of the performance of our fetching algorithms.","category":"page"},{"location":"","page":"Home","title":"Home","text":"Check out the following index for a list of availiable ratetables:","category":"page"},{"location":"","page":"Home","title":"Home","text":"","category":"page"},{"location":"","page":"Home","title":"Home","text":"Modules = [RateTables]","category":"page"},{"location":"#RateTables.hmd_countries","page":"Home","title":"RateTables.hmd_countries","text":"`hmd_countries`\n\nGives a list of countries codes used in the hmd_rates dataset. \n\n\n\n\n\n","category":"constant"},{"location":"#RateTables.hmd_rates","page":"Home","title":"RateTables.hmd_rates","text":"`hmd_rates`\n\nRateTable providing daily hazard rates for both sexes for several countries. They are derived from annual death probabilities (qₓ's) from the Human Mortality Database\n\nSegmented by country ∈ keys(hmd_countries) and sex ∈ (:male, :female, :total). \n\nThe list of countries codes is given with details in the hmd_countries constant. \n\n\n\n\n\n","category":"constant"},{"location":"#RateTables.slopop","page":"Home","title":"RateTables.slopop","text":"`slopop`\n\nSlovene census data. Correspond to R's relsurv::slopop ratetable from the relsurv package. Segmented by sex ∈ (:male, :female).\n\n\n\n\n\n","category":"constant"},{"location":"#RateTables.survexp_fr","page":"Home","title":"RateTables.survexp_fr","text":"`survexp_fr`\n\nFrench census datas, drawn from R's package survexp.fr. Death rates are available from 1977 to 2019 for males and females aged from 0 to 99. Segmented by sex ∈ (:male, :female)\n\nSource: https://www.insee.fr/fr/statistiques/fichier/5390366/fm_t68.xlsx\n\nReferences: Institut National de la Statistique et des Etudes Economiques\n\n\n\n\n\n","category":"constant"},{"location":"#RateTables.survexp_mn","page":"Home","title":"RateTables.survexp_mn","text":"`survexp_mn`\n\nCensus data set for the US population, drawn from R's package survival. RateTable survexp_mn gives total Minnesota population, by age and sex, 1970 to 2013. Segmented by sex ∈ (:male, :female)\n\n\n\n\n\n","category":"constant"},{"location":"#RateTables.survexp_us","page":"Home","title":"RateTables.survexp_us","text":"`survexp_us`\n\nCensus data set for the US population, drawn from R's package survival. RateTable survexp_us gives total United States population, by age and sex, 1940 to 2012. Segmented by sex ∈ (:male, :female)\n\n\n\n\n\n","category":"constant"},{"location":"#RateTables.survexp_usr","page":"Home","title":"RateTables.survexp_usr","text":"`survexp_usr`\n\nCensus data set for the US population, drawn from R's package survival. RateTable survexp_usr gives the United States population, by age, sex and race, 1940 to 2014. Race is white or black. For 1960 and 1970 the black population values were not reported separately, so the nonwhite values were used. (Over the years, the reported tables have differed wrt reporting non-white and/or black.). Segmented by sex ∈ (:male, :female) and race∈ (:white, :black)`. \n\n\n\n\n\n","category":"constant"},{"location":"#RateTables.RateTable","page":"Home","title":"RateTables.RateTable","text":"`RateTable`\n\nThis class contains daily rate tables used in person-years computation. \n\nEach of these tables contains the daily hazard rate for a matched subject from the population, defined as -log(1-qₓ) for qₓ the 1 year probability of death as reported in the original tables from the US Census. The tables are given in terms of hazard per day for computational convenience.\n\n\n\n\n\n","category":"type"},{"location":"#RateTables.daily_hazard-Tuple{RateTables.BasicRateTable, Any, Any}","page":"Home","title":"RateTables.daily_hazard","text":"`daily_hazard(rt::BasicRateTable,age,date)`\n\nThis function queries daily hazard values from a given BasicRateTable. The parameters age and date have to be in days (1 year = 365.241 days).\n\n\n\n\n\n","category":"method"}]
}
